<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>まきメタボ・特定保健指導判定</title>
</head>
<body>
<h1>まきメタボ判定・特定保健指導</h1>

<form id="checkForm">
    <p>腹囲が基準以上ですか？（男性85cm以上／女性90cm以上）<br>
        <label><input type="radio" name="waist" value="yes">はい</label>
        <label><input type="radio" name="waist" value="no">いいえ</label>
    </p>

    <p>BMIが25以上ですか？<br>
        <label><input type="radio" name="bmi" value="yes">はい</label>
        <label><input type="radio" name="bmi" value="no">いいえ</label>
    </p>

    <p>血糖が基準以上ですか？（空腹時血糖100以上／HbA1c5.6%以上）<br>
        <label><input type="radio" name="glucose" value="yes">はい</label>
        <label><input type="radio" name="glucose" value="no">いいえ</label>
    </p>

    <p>脂質が基準以上ですか？（TG150以上／随時175以上／HDL40未満）<br>
        <label><input type="radio" name="lipid" value="yes">はい</label>
        <label><input type="radio" name="lipid" value="no">いいえ</label>
    </p>

    <p>血圧が基準以上ですか？（収縮期130以上／拡張期85以上）<br>
        <label><input type="radio" name="bp" value="yes">はい</label>
        <label><input type="radio" name="bp" value="no">いいえ</label>
    </p>

    <p>糖尿病・脂質異常症・高血圧症で薬剤治療中ですか？<br>
        <label><input type="radio" name="med" value="yes">はい</label>
        <label><input type="radio" name="med" value="no">いいえ</label>
    </p>

    <button type="button" onclick="judge()">判定する</button>
</form>

<div id="result"></div>

<script>
    function judge(){
      const f = document.forms['checkForm'];
      const waist = f.waist.value === 'yes';
      const bmi = f.bmi.value === 'yes';
      const glucose = f.glucose.value === 'yes';
      const lipid = f.lipid.value === 'yes';
      const bp = f.bp.value === 'yes';
      const med = f.med.value === 'yes';

      if(med){
        document.getElementById('result').innerHTML = "<p>薬剤治療中 → 対象外（医療機関管理）</p>";
        return;
      }

      const risks = [bmi, glucose, lipid, bp].filter(x=>x).length;

      let metab = "非該当";
      let guidance = "対象外";

      if(waist && risks >= 2){
        metab = "メタボ該当";
        guidance = "積極的支援";
      } else if(waist && risks === 1){
        metab = "予備群";
        guidance = "動機づけ支援";
      } else if(!waist && risks >= 2){
        metab = "予備群";
        guidance = "動機づけ支援";
      }

      document.getElementById('result').innerHTML =
        `<p>メタボ判定：${metab}<br>特定保健指導区分 ${guidance}</p>`;
    }
</script>
</body>
</html>