<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ãƒ¡ã‚¿ãƒœï¼†ä¿å¥æŒ‡å°ãƒã‚§ãƒƒã‚¯ã‚·ãƒ¼ãƒˆ å®Œå…¨ç‰ˆ</title>
<style>
body { font-family: Arial; padding: 20px; }
h2 { margin-bottom: 10px; }
.section { margin-bottom: 20px; }
.result { font-size: 1.3em; font-weight: bold; padding: 15px; margin-top: 15px; border-radius: 10px; }
.green { background: #d4f7d4; }   
.yellow { background: #fff3b0; }  
.red { background: #ffc5c5; }    
</style>
</head>
<body>

<h2>ãƒ¡ã‚¿ãƒœãƒã‚§ãƒƒã‚¯ & ä¿å¥æŒ‡å°ãƒã‚§ãƒƒã‚¯ã‚·ãƒ¼ãƒˆ</h2>

<form id="form">

<div class="section">
<h3>ğŸ”¹ ã‚¹ãƒ†ãƒƒãƒ—1ï¼šè…¹å›²ãƒ»BMIãƒ»æœè–¬</h3>
æ€§åˆ¥ï¼š<br>
<label><input type="radio" name="sex" value="male"> ç”·æ€§</label><br>
<label><input type="radio" name="sex" value="female"> å¥³æ€§</label><br><br>

<b>è…¹å›²ã¯åŸºæº–ä»¥ä¸Šã§ã™ã‹ï¼Ÿ</b>ï¼ˆç”·æ€§ â‰¥ 85cm / å¥³æ€§ â‰¥ 90cmï¼‰<br>
<label><input type="radio" name="waist" value="yes"> ã¯ã„</label>
<label><input type="radio" name="waist" value="no"> ã„ã„ãˆ</label><br><br>

<b>BMIã¯25ä»¥ä¸Šã§ã™ã‹ï¼Ÿï¼ˆkg/mÂ²ï¼‰</b><br>
<label><input type="radio" name="bmi" value="yes"> ã¯ã„</label>
<label><input type="radio" name="bmi" value="no"> ã„ã„ãˆ</label><br><br>

<b>æœè–¬ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</b><br>
<label><input type="radio" name="med" value="yes"> ã¯ã„</label>
<label><input type="radio" name="med" value="no"> ã„ã„ãˆ</label><br><br>
</div>

<div class="section">
<h3>ğŸ”¹ ã‚¹ãƒ†ãƒƒãƒ—2ï¼šæ¤œæŸ»å€¤ãƒ»å–«ç…™ãƒ»å¹´é½¢</h3>
<b>â‘ è¡€åœ§ï¼ˆåç¸®æœŸ â‰¥ 130 mmHg ã¾ãŸã¯ æ‹¡å¼µæœŸ â‰¥ 85 mmHgï¼‰</b><br>
<label><input type="radio" name="bp" value="yes"> ã¯ã„</label>
<label><input type="radio" name="bp" value="no"> ã„ã„ãˆ</label><br><br>

<b>â‘¡è¡€ç³–ï¼ˆç©ºè…¹æ™‚ â‰¥ 100 mg/dL ã¾ãŸã¯ HbA1c â‰¥ 5.6 %ï¼‰</b><br>
<label><input type="radio" name="gl" value="yes"> ã¯ã„</label>
<label><input type="radio" name="gl" value="no"> ã„ã„ãˆ</label><br><br>

<b>â‘¢è„‚è³ªï¼ˆTG â‰¥ 150 mg/dL ã¾ãŸã¯ HDL < 40 mg/dLï¼‰</b><br>
<label><input type="radio" name="lipid" value="yes"> ã¯ã„</label>
<label><input type="radio" name="lipid" value="no"> ã„ã„ãˆ</label><br><br>

<b>å–«ç…™ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ</b><br>
<label><input type="radio" name="smoke" value="yes"> ã¯ã„</label>
<label><input type="radio" name="smoke" value="no"> ã„ã„ãˆ</label><br><br>

<b>å¹´é½¢ã¯65æ­³ä»¥ä¸Šã§ã™ã‹ï¼Ÿ</b><br>
<label><input type="radio" name="age" value="yes"> ã¯ã„</label>
<label><input type="radio" name="age" value="no"> ã„ã„ãˆ</label><br><br>
</div>

<button type="button" onclick="judge()">åˆ¤å®šã™ã‚‹</button>
</form>

<div id="result_meta" class="result"></div>
<div id="result_hoken" class="result"></div>

<script>
function judge(){
  // ã‚¹ãƒ†ãƒƒãƒ—1
  const waist = document.querySelector('input[name="waist"]:checked')?.value;
  const bmi = document.querySelector('input[name="bmi"]:checked')?.value;
  const med = document.querySelector('input[name="med"]:checked')?.value;
  const bp = document.querySelector('input[name="bp"]:checked')?.value;
  const gl = document.querySelector('input[name="gl"]:checked')?.value;
  const lipid = document.querySelector('input[name="lipid"]:checked')?.value;
  const smoke = document.querySelector('input[name="smoke"]:checked')?.value;
  const age = document.querySelector('input[name="age"]:checked')?.value;

  if(!waist || !bmi || !med || !bp || !gl || !lipid || !smoke || !age){
    alert("ã™ã¹ã¦ã®é …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„");
    return;
  }

  // ----------------------
  // ãƒ¡ã‚¿ãƒœåˆ¤å®š
  // ----------------------
  let meta_count=0;
  if(bp==="yes") meta_count++;
  if(gl==="yes") meta_count++;
  if(lipid==="yes") meta_count++;

  let meta_result="", meta_color="";
  if(waist==="no"){ meta_result="éè©²å½“"; meta_color="green"; }
  else{
    if(meta_count===0){ meta_result="éè©²å½“"; meta_color="green"; }
    else if(meta_count===1){ meta_result="äºˆå‚™è»"; meta_color="yellow"; }
    else{ meta_result="åŸºæº–è©²å½“"; meta_color="red"; }
  }
  document.getElementById("result_meta").textContent="ã€ãƒ¡ã‚¿ãƒœãƒã‚§ãƒƒã‚¯åˆ¤å®šã€‘ "+meta_result;
  document.getElementById("result_meta").className="result "+meta_color;

  // ----------------------
  // ä¿å¥æŒ‡å°åˆ¤å®š
  // ----------------------
  let step1_hoken="";
  if(med==="yes"){ step1_hoken="æœè–¬ã‚ã‚Š"; }
  else if(waist==="no" && bmi==="yes"){ step1_hoken="åŸºæº–1"; }
  else { step1_hoken="åŸºæº–2"; }

  let count2=0;
  if(bp==="yes") count2++;
  if(gl==="yes") count2++;
  if(lipid==="yes") count2++;

  let hoken_result="", hoken_color="";

  if(step1_hoken==="æœè–¬ã‚ã‚Š"){
    hoken_result="æƒ…å ±æä¾›"; hoken_color="green";
  }
  else if(step1_hoken==="åŸºæº–1"){
    if(count2===0){ hoken_result="æƒ…å ±æä¾›"; hoken_color="green"; }
    else if(count2===1){ hoken_result="å‹•æ©Ÿã¥ã‘æ”¯æ´"; hoken_color="yellow"; }
    else if(count2===2){ hoken_result=(smoke==="no")?"å‹•æ©Ÿã¥ã‘æ”¯æ´":(age==="yes")?"å‹•æ©Ÿã¥ã‘æ”¯æ´":"ç©æ¥µçš„æ”¯æ´"; hoken_color=(smoke==="no" || age==="yes")?"yellow":"red"; }
    else if(count2===3){ hoken_result=(age==="yes")?"å‹•æ©Ÿã¥ã‘æ”¯æ´":"ç©æ¥µçš„æ”¯æ´"; hoken_color=(age==="yes")?"yellow":"red"; }
  }
  else if(step1_hoken==="åŸºæº–2"){
    if(count2===0){ hoken_result="æƒ…å ±æä¾›"; hoken_color="green"; }
    else if(count2===1){ hoken_result=(smoke==="no")?"å‹•æ©Ÿã¥ã‘æ”¯æ´":(age==="yes")?"å‹•æ©Ÿã¥ã‘æ”¯æ´":"ç©æ¥µçš„æ”¯æ´"; hoken_color=(smoke==="no" || age==="yes")?"yellow":"red"; }
    else if(count2===2){ hoken_result=(age==="yes")?"å‹•æ©Ÿã¥ã‘æ”¯æ´":"ç©æ¥µçš„æ”¯æ´"; hoken_color=(age==="yes")?"yellow":"red"; }
    // åŸºæº–2ã¯3é …ç›®è©²å½“ã¯å­˜åœ¨ã—ãªã„
  }

  document.getElementById("result_hoken").textContent="ã€ä¿å¥æŒ‡å°åˆ¤å®šã€‘ "+hoken_result;
  document.getElementById("result_hoken").className="result "+hoken_color;
}
</script>

</body>
</html>
